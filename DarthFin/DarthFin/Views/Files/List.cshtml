@model FileListModel
@{
    ViewData["Title"] = "Files List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">

    <h1 class="mb-4 text-center">All Files</h1>

    <!-- Upload Form -->
    <div class="card p-3 mb-4 shadow-sm border-0">
        <form asp-controller="Files" asp-action="UploadFile" method="post" enctype="multipart/form-data" class="row gy-2 gx-3 align-items-center">
            <div class="col-sm-6">
                <input type="file" name="file" class="form-control" />
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-cloud-upload"></i> Upload
                </button>
            </div>
        </form>
    </div>

    <!-- Files Table -->
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-striped table-hover text-center align-middle mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th>Name</th>
                            <th>Is Processed</th>
                            <th style="width: 260px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var file in Model.Files)
                        {
                            <tr>
                                <td class="fw-semibold">@file.Name</td>
                                <td>
                                    @if (file.IsProcessed)
                                    {
                                        <span class="badge bg-success">Processed</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">Pending</span>
                                    }
                                </td>

                                <td>
                                    <div class="btn-group" role="group">

                                        <!-- Process -->
                                        <form asp-controller="Files" asp-action="Process" asp-route-id="@file.Id" method="post">
                                            <button type="submit" class="btn btn-warning px-3 py-2" data-bs-toggle="tooltip" title="Process File">
                                                <i class="bi bi-gear-fill"></i> Process
                                            </button>
                                        </form>

                                        <!-- File Entries -->
                                        <form asp-controller="Files" asp-action="FileEntries" asp-route-id="@file.Id" method="get">
                                            <button type="submit" class="btn btn-info text-white px-3 py-2" data-bs-toggle="tooltip" title="View Entries">
                                                <i class="bi bi-list-ul"></i> Entries
                                            </button>
                                        </form>

                                        <!-- Delete -->
                                        <form asp-controller="Files" asp-action="Delete" asp-route-id="@file.Id" method="post"
                                              onsubmit="return confirm('Are you sure you want to delete this file?');">
                                            <button type="submit" class="btn btn-danger px-3 py-2" data-bs-toggle="tooltip" title="Delete File">
                                                <i class="bi bi-trash-fill"></i> Delete
                                            </button>
                                        </form>

                                    </div>
                                </td>

                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>